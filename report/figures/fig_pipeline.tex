\begin{figure}[ht]
    \centering
    \begin{tikzpicture}[node distance=1cm, auto]  
        
        % ------------------
        % nodes
        % ------------------
        
        \node[bluenode, label=right:$tp_1$] (endpoint1) {$E_1$};
        \node[mylabel, left=of endpoint1] {Outer Loop};
        
        \node[bluenode, below=2cm of endpoint1, label=right:$\bowtie tp_2$] (endpoint3) {$E_3$};
        \node[bluenode, left=of endpoint3, label=right:$\bowtie tp_2$] (endpoint2) {$E_2$};
        \node[bluenode, right=of endpoint3, label=right:$\bowtie tp_2$] (endpoint4) {$E_4$};
        
        \node[mylabel, left=of endpoint2] {Inner Loop};
        \node[mydot, below=2cm of endpoint3] (end) {};
        
        % ------------------
        % arrows
        % ------------------
        
        \draw[myarrow] (endpoint1.south) to node[left]{$\{b_1\}$} ([xshift=-0.2 cm]endpoint2.north);
        \draw[myarrow] (endpoint1.south) to node[right]{$\{b_4\}$}([xshift=0.2 cm]endpoint2.north);
        \draw[myarrow] (endpoint1.south) to node[right]{$\{b_2\}$} (endpoint3.north);
        \draw[myarrow] (endpoint1.south) to node[right]{$\{b_3\}$} (endpoint4.north);
        
        \draw[myarrow] ([xshift=-0.2 cm]endpoint2.south) to node[left]{$\{b_5\}$} (end.north);
        \draw[myarrow] ([xshift=0.2 cm]endpoint2.south) to node[right]{$\{b_8\}$} (end.north);
        \draw[myarrow] (endpoint3.south) to node[right]{$\{b_6\}$} (end.north);
        \draw[myarrow] (endpoint4.south) to node[right]{$\{b_7\}$} (end.north);
    
    \end{tikzpicture} 
    \caption{Répartition des bindings par \peneloop avec l'approche pipeline, où $tp_1, tp_2$ sont des triples patterns, $E_1$ la source pertinente de $tp_1$ et $E_2, E_3, E_4$ les répliques utilisées comme sources de $tp_2$.}
    \label{fig:pipeline}
\end{figure}